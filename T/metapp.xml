<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<doc>
<rowtype xpath="//metapp" max="1">
 <variable xpath="_key" substitution="%key" />
 <variable xpath="doctitle" substitution="%doctitle" />
 <variable xpath="js" substitution="%js" />
	<variable xpath="css" substitution="%css" />
	<variable xpath="html" substitution="%html" />
	<html><dialog id="#UNIQUEID#" class="dialog appeditor" ondragstart="app.dialog_drag_start(event)" ondrop="app.dialog_drop(event)" ondragover="app.dialog_drag_over(event);"><input type="hidden" value="%key" />
	 <input type="text" value="%doctitle" placeholder="doctitle" /><button onclick="app.saveapp('#UNIQUEID#');this.parentElement.close();"><i class="fa fa-floppy-o">
		</i></button><button title="preview!" onclick="app.metappPreview('#UNIQUEID#');"><i class="fa fa-play">
		</i></button><button onclick="this.parentElement.close()"><i class="fa fa-times"> </i></button><br/>
	 <textarea class="app-javascript" placeholder="javascript...">%js</textarea>
		<textarea class="app-style" placeholder="css...">%css</textarea>
		<textarea class="app-html" placeholder="html...">%html</textarea>		
		</dialog></html>
</rowtype>
		<onloadall>
			app.saveapp=function(id){var x=document.getElementById(id);var dd=x.getElementsByTagName('textarea');var kk=x.getElementsByTagName('input');
				f$.db.getone(kk[0].value,function(o){o.doctitle=kk[1].value;o.js=dd[0].value;o.css=dd[1].value;o.html=dd[2].value;f$.db.set(o);});};
			app.metappPreview=function(id){
				var x=document.getElementById(id);
				var dd=x.getElementsByTagName('textarea');
				var kk=x.getElementsByTagName('input');
				var o={$key:kk[0].value,doctitle:kk[1].value};
				o.js=dd[0].value;o.css=dd[1].value;o.html=dd[2].value;
				tau.syncrender(tau.$$('hiddentarget'),tau.preloaded('T/metapp-run.xml'),tau.JSON2xmldoc(o,'metapp'))};
				tau.$$('#UNIQUEID#').show();
		</onloadall>
</doc>